<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="../css/styles.css">
<meta charset="UTF-8" />
<title>Night Jump Runner</title>
<style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {

    background: #0b1020;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: white;
  }

  canvas {
    background: linear-gradient(#0b1020, #151b3d);
    border: 3px solid #222;
  }

  .overlay {
    position: absolute;
    text-align: center;
    display: none;
  }

  .overlay h1 {
    margin-bottom: 10px;
  }

  .overlay button {
    padding: 10px 20px;
    background: #ffffff;
    color: #0b1020;
    border: none;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>
 <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">
            <span class="d-block d-lg-none">Jacqueline Gruber</span>
            <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2"
                    src="../assets/img/gruber headshot.webp" alt="..." /></span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#about">About</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#experience">Experience</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#education">Education</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#skills">Skills</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#interests">Interests</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../index.html#awards">Awards</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="aigame.html">Night Jump Runner</a></li>
                <li class="nav-item"><a class="nav-link js-scroll-trigger" href="scratch.html">scratch</a></li>
            </ul>
        </div>
    </nav>
<canvas id="game" width="800" height="400"></canvas>

<div class="overlay" id="gameOver">
  <h1>Game Over</h1>
  <p id="finalScore"></p>
  <p id="highScore"></p>
  <br>
  <button onclick="restartGame()">Restart</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gravity = 0.6;
let jumpStrength = -10;
let speed = 4;
let gameRunning = true;

let score = 0;
let highScore = localStorage.getItem("highScore") || 0;

const player = {
  x: 100,
  y: 300,
  width: 25,
  height: 40,
  velocityY: 0,
  onGround: false
};

let cars = [];

function spawnCar() {
  cars.push({
    x: canvas.width,
    y: 335,        // lower to the ground
    width: 45,     // smaller width
    height: 20,    // shorter height so jumps clear it
    passed: false
  });
}


setInterval(() => {
  if (gameRunning) spawnCar();
}, 1700);

document.addEventListener("keydown", e => {
  if (e.code === "Space" && player.onGround) {
    player.velocityY = jumpStrength;
    player.onGround = false;
  }
});

function update() {
  if (!gameRunning) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Ground
  ctx.fillStyle = "#1f2933";
  ctx.fillRect(0, 365, canvas.width, 35);

  // Player physics
  player.velocityY += gravity;
  player.y += player.velocityY;

  if (player.y + player.height >= 365) {
    player.y = 365 - player.height;
    player.velocityY = 0;
    player.onGround = true;
  }

  // Draw player (stick-person style)
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Cars
  ctx.fillStyle = "#ff3b3b";
  cars.forEach((car, index) => {
    car.x -= speed;
    ctx.fillRect(car.x, car.y, car.width, car.height);

    // Collision
    if (
      player.x < car.x + car.width &&
      player.x + player.width > car.x &&
      player.y < car.y + car.height &&
      player.y + player.height > car.y
    ) {
      endGame();
    }

    // Score
    if (!car.passed && car.x + car.width < player.x) {
      car.passed = true;
      score++;
    }

    if (car.x + car.width < 0) {
      cars.splice(index, 1);
    }
  });

  // Score display
  ctx.fillStyle = "#ffffff";
  ctx.font = "20px Arial";
  ctx.fillText(`Score: ${score}`, canvas.width - 130, 30);

  requestAnimationFrame(update);
}

function endGame() {
  gameRunning = false;

  if (score > highScore) {
    highScore = score;
    localStorage.setItem("highScore", highScore);
  }

  document.getElementById("finalScore").textContent =
    `Score: ${score}`;
  document.getElementById("highScore").textContent =
    `High Score: ${highScore}`;
  document.getElementById("gameOver").style.display = "block";
}

function restartGame() {
  score = 0;
  cars = [];
  player.y = 300;
  player.velocityY = 0;
  gameRunning = true;
  document.getElementById("gameOver").style.display = "none";
  update();
}

update();
</script>

</body>
</html>
